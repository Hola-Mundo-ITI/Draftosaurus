<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba de Restricciones Completas - Draftosaurus</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .contenedor-pruebas {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .titulo-principal {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .seccion-prueba {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        .titulo-seccion {
            color: #2196F3;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        .boton-prueba {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        .boton-prueba:hover {
            background-color: #45a049;
        }
        .boton-prueba.peligro {
            background-color: #f44336;
        }
        .boton-prueba.peligro:hover {
            background-color: #da190b;
        }
        .resultado-pruebas {
            margin-top: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
            border-left: 4px solid #2196F3;
        }
        .log-consola {
            background-color: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
        }
        .instrucciones {
            background-color: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }
        .estado-zona {
            display: inline-block;
            margin: 5px;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        .estado-implementado {
            background-color: #4CAF50;
            color: white;
        }
        .estado-parcial {
            background-color: #FF9800;
            color: white;
        }
        .estado-pendiente {
            background-color: #f44336;
            color: white;
        }
    </style>
</head>
<body>
    <div class="contenedor-pruebas">
        <h1 class="titulo-principal">ğŸ¦• Prueba de Restricciones Completas - Draftosaurus</h1>
        
        <div class="instrucciones">
            <h3>ğŸ“‹ Instrucciones de Prueba</h3>
            <p><strong>1.</strong> Abre las herramientas de desarrollador (F12) y ve a la pestaÃ±a "Console"</p>
            <p><strong>2.</strong> Haz clic en "Ejecutar Todas las Pruebas" para verificar el funcionamiento</p>
            <p><strong>3.</strong> Revisa los resultados en la consola y en la secciÃ³n de resultados abajo</p>
            <p><strong>4.</strong> Usa los botones individuales para probar zonas especÃ­ficas</p>
        </div>

        <div class="seccion-prueba">
            <h2 class="titulo-seccion">ğŸ§ª Estado Actual de ImplementaciÃ³n</h2>
            <div>
                <span class="estado-zona estado-implementado">ğŸŒ² Bosque de la Semejanza</span>
                <span class="estado-zona estado-implementado">ğŸŒ¾ Prado de la Diferencia</span>
                <span class="estado-zona estado-implementado">ğŸ’• Pradera del Amor</span>
                <span class="estado-zona estado-implementado">ğŸŒ¿ TrÃ­o Frondoso</span>
                <span class="estado-zona estado-implementado">ğŸï¸ Isla Solitaria</span>
                <span class="estado-zona estado-implementado">ğŸ‘‘ Rey de la Selva</span>
                <span class="estado-zona estado-implementado">ğŸŒŠ Dinosaurios en el RÃ­o</span>
                <span class="estado-zona estado-implementado">ğŸ¦– Zona del T-Rex</span>
            </div>
        </div>

        <div class="seccion-prueba">
            <h2 class="titulo-seccion">ğŸš€ Pruebas Automatizadas</h2>
            <button class="boton-prueba" onclick="ejecutarTodasLasPruebas()">
                ğŸ§ª Ejecutar Todas las Pruebas
            </button>
            <button class="boton-prueba peligro" onclick="limpiarConsola()">
                ğŸ—‘ï¸ Limpiar Consola
            </button>
        </div>

        <div class="seccion-prueba">
            <h2 class="titulo-seccion">ğŸ¯ Pruebas por Zona Individual</h2>
            <button class="boton-prueba" onclick="probarZona('bosque')">ğŸŒ² Bosque de la Semejanza</button>
            <button class="boton-prueba" onclick="probarZona('prado')">ğŸŒ¾ Prado de la Diferencia</button>
            <button class="boton-prueba" onclick="probarZona('pradera')">ğŸ’• Pradera del Amor</button>
            <button class="boton-prueba" onclick="probarZona('trio')">ğŸŒ¿ TrÃ­o Frondoso</button>
            <button class="boton-prueba" onclick="probarZona('isla')">ğŸï¸ Isla Solitaria</button>
            <button class="boton-prueba" onclick="probarZona('rey')">ğŸ‘‘ Rey de la Selva</button>
            <button class="boton-prueba" onclick="probarZona('rio')">ğŸŒŠ Dinosaurios en el RÃ­o</button>
            <button class="boton-prueba" onclick="probarZona('trex')">ğŸ¦– Zona del T-Rex</button>
        </div>

        <div class="seccion-prueba">
            <h2 class="titulo-seccion">ğŸ” Pruebas de ValidaciÃ³n EspecÃ­ficas</h2>
            <button class="boton-prueba" onclick="probarColocacionSecuencial()">ğŸ“ ColocaciÃ³n Secuencial</button>
            <button class="boton-prueba" onclick="probarRestriccionesEspecies()">ğŸ¦• Restricciones de Especies</button>
            <button class="boton-prueba" onclick="probarLimitesSlots()">ğŸ”¢ LÃ­mites de Slots</button>
            <button class="boton-prueba" onclick="probarPuntuacionContextual()">ğŸ† PuntuaciÃ³n Contextual</button>
        </div>

        <div class="resultado-pruebas">
            <h3>ğŸ“Š Resultados de Pruebas</h3>
            <div id="resultados-container">
                <p>Haz clic en "Ejecutar Todas las Pruebas" para ver los resultados aquÃ­.</p>
            </div>
        </div>

        <div class="log-consola" id="log-consola">
            <div>ğŸ–¥ï¸ Consola de Pruebas - Los resultados aparecerÃ¡n aquÃ­...</div>
        </div>
    </div>

    <!-- Cargar todos los archivos JavaScript necesarios -->
    <script src="JS/tablero/ValidadorZona.js"></script>
    <script src="JS/tablero/CalculadoraPuntuacion.js"></script>
    <script src="JS/pruebas/pruebasRestricciones.js"></script>

    <script>
        // Interceptar console.log para mostrar en la pÃ¡gina
        const logConsola = document.getElementById('log-consola');
        const originalLog = console.log;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const mensaje = args.join(' ');
            const div = document.createElement('div');
            div.textContent = mensaje;
            div.style.marginBottom = '2px';
            logConsola.appendChild(div);
            logConsola.scrollTop = logConsola.scrollHeight;
        };

        // FunciÃ³n para ejecutar todas las pruebas
        function ejecutarTodasLasPruebas() {
            limpiarConsola();
            console.log('ğŸš€ Iniciando pruebas completas de restricciones...');
            console.log('='.repeat(60));
            
            try {
                const pruebas = new PruebasRestricciones();
                const resultado = pruebas.ejecutarTodasLasPruebas();
                
                // Mostrar resumen en la interfaz
                const container = document.getElementById('resultados-container');
                container.innerHTML = `
                    <h4>ğŸ“ˆ Resumen de Resultados:</h4>
                    <p><strong>Total de pruebas:</strong> ${resultado.total}</p>
                    <p><strong>âœ… Exitosas:</strong> ${resultado.exitosas}</p>
                    <p><strong>âŒ Fallidas:</strong> ${resultado.fallidas}</p>
                    <p><strong>ğŸ“Š Porcentaje de Ã©xito:</strong> ${resultado.porcentajeExito.toFixed(1)}%</p>
                    ${resultado.fallidas === 0 ? 
                        '<p style="color: green; font-weight: bold;">ğŸ‰ Â¡Todas las pruebas pasaron exitosamente!</p>' : 
                        '<p style="color: red; font-weight: bold;">âš ï¸ Algunas pruebas fallaron. Revisa la consola para mÃ¡s detalles.</p>'
                    }
                `;
                
                return resultado;
            } catch (error) {
                console.error('âŒ Error al ejecutar las pruebas:', error);
                const container = document.getElementById('resultados-container');
                container.innerHTML = `<p style="color: red;">âŒ Error al ejecutar las pruebas: ${error.message}</p>`;
            }
        }

        // FunciÃ³n para probar zona especÃ­fica
        function probarZona(nombreZona) {
            limpiarConsola();
            console.log(`ğŸ¯ Probando zona especÃ­fica: ${nombreZona}`);
            console.log('='.repeat(40));
            
            try {
                const pruebas = new PruebasRestricciones();
                pruebas.probarZonaEspecifica(nombreZona);
            } catch (error) {
                console.error(`âŒ Error al probar zona ${nombreZona}:`, error);
            }
        }

        // FunciÃ³n para limpiar la consola
        function limpiarConsola() {
            logConsola.innerHTML = '<div>ğŸ–¥ï¸ Consola limpiada...</div>';
        }

        // Pruebas especÃ­ficas adicionales
        function probarColocacionSecuencial() {
            limpiarConsola();
            console.log('ğŸ“ Probando colocaciÃ³n secuencial...');
            console.log('='.repeat(40));
            
            const validador = new ValidadorZona();
            const crearSlot = (num) => ({ dataset: { slot: num.toString() } });
            
            // Prueba Bosque
            console.log('ğŸŒ² Probando Bosque de la Semejanza:');
            let resultado = validador.validarBosqueSemejanza([], { tipo: 'triceratops' }, crearSlot(2));
            console.log(`   Primer dino en slot 2: ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
            
            resultado = validador.validarBosqueSemejanza([], { tipo: 'triceratops' }, crearSlot(1));
            console.log(`   Primer dino en slot 1: ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
            
            // Prueba Prado
            console.log('ğŸŒ¾ Probando Prado de la Diferencia:');
            resultado = validador.validarPradoDiferencia([], { tipo: 'stegosaurus' }, crearSlot(3));
            console.log(`   Primer dino en slot 3: ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
            
            resultado = validador.validarPradoDiferencia([], { tipo: 'stegosaurus' }, crearSlot(1));
            console.log(`   Primer dino en slot 1: ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
            
            // Prueba RÃ­o
            console.log('ğŸŒŠ Probando Dinosaurios en el RÃ­o:');
            resultado = validador.validarDinosRio([], { tipo: 'brontosaurus' }, crearSlot(4));
            console.log(`   Primer dino en slot 4: ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
            
            resultado = validador.validarDinosRio([], { tipo: 'brontosaurus' }, crearSlot(1));
            console.log(`   Primer dino en slot 1: ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
        }

        function probarRestriccionesEspecies() {
            limpiarConsola();
            console.log('ğŸ¦• Probando restricciones de especies...');
            console.log('='.repeat(40));
            
            const validador = new ValidadorZona();
            const crearSlot = (num) => ({ dataset: { slot: num.toString() } });
            
            // Zona T-Rex
            console.log('ğŸ¦– Probando Zona del T-Rex:');
            let resultado = validador.validarZonaTRex([], { tipo: 'triceratops' }, crearSlot(1));
            console.log(`   Triceratops en zona T-Rex: ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
            
            resultado = validador.validarZonaTRex([], { tipo: 'trex' }, crearSlot(1));
            console.log(`   T-Rex en zona T-Rex: ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
            
            // Pradera del Amor
            console.log('ğŸ’• Probando Pradera del Amor:');
            const dinosauriosAmor = [
                { tipo: 'triceratops' },
                { tipo: 'triceratops' }
            ];
            resultado = validador.validarPraderaAmor(dinosauriosAmor, { tipo: 'triceratops' }, crearSlot(3));
            console.log(`   Tercer Triceratops (excede pareja): ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
            
            resultado = validador.validarPraderaAmor(dinosauriosAmor, { tipo: 'stegosaurus' }, crearSlot(3));
            console.log(`   Stegosaurus (nueva especie): ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
        }

        function probarLimitesSlots() {
            limpiarConsola();
            console.log('ğŸ”¢ Probando lÃ­mites de slots...');
            console.log('='.repeat(40));
            
            const validador = new ValidadorZona();
            const crearSlot = (num) => ({ dataset: { slot: num.toString() } });
            
            // Isla Solitaria
            console.log('ğŸï¸ Probando Isla Solitaria:');
            let resultado = validador.validarIslaSolitaria([], { tipo: 'pteranodon' }, crearSlot(1));
            console.log(`   Primer dinosaurio: ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
            
            const dinosauriosIsla = [{ tipo: 'pteranodon' }];
            resultado = validador.validarIslaSolitaria(dinosauriosIsla, { tipo: 'triceratops' }, crearSlot(1));
            console.log(`   Segundo dinosaurio: ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
            
            // TrÃ­o Frondoso
            console.log('ğŸŒ¿ Probando TrÃ­o Frondoso:');
            const dinosauriosTrio = [
                { tipo: 'triceratops' },
                { tipo: 'stegosaurus' },
                { tipo: 'brontosaurus' }
            ];
            resultado = validador.validarTrioFrondoso(dinosauriosTrio, { tipo: 'trex' }, crearSlot(4));
            console.log(`   Cuarto dinosaurio (excede lÃ­mite): ${resultado.valido ? 'âœ…' : 'âŒ'} - ${resultado.razon}`);
        }

        function probarPuntuacionContextual() {
            limpiarConsola();
            console.log('ğŸ† Probando puntuaciÃ³n contextual...');
            console.log('='.repeat(40));
            
            const calculadora = new CalculadoraPuntuacion();
            
            // Pradera del Amor
            console.log('ğŸ’• Probando Pradera del Amor:');
            const dinosauriosAmor = [
                { tipo: 'triceratops', jugadorColocado: 1 },
                { tipo: 'triceratops', jugadorColocado: 1 },
                { tipo: 'stegosaurus', jugadorColocado: 1 }
            ];
            const puntosAmor = calculadora.calcularPraderaAmor(dinosauriosAmor);
            console.log(`   2 Triceratops + 1 Stegosaurus = ${puntosAmor} puntos (esperado: 5)`);
            
            // TrÃ­o Frondoso
            console.log('ğŸŒ¿ Probando TrÃ­o Frondoso:');
            const dinosauriosTrio = [
                { tipo: 'triceratops', jugadorColocado: 1 },
                { tipo: 'stegosaurus', jugadorColocado: 1 },
                { tipo: 'brontosaurus', jugadorColocado: 1 }
            ];
            const puntosTrio = calculadora.calcularTrioFrondoso(dinosauriosTrio);
            console.log(`   3 dinosaurios = ${puntosTrio} puntos (esperado: 7)`);
            
            // Zona T-Rex
            console.log('ğŸ¦– Probando Zona del T-Rex:');
            const dinosauriosTRex = [{ tipo: 'trex', jugadorColocado: 1 }];
            const puntosTRex = calculadora.calcularZonaTRex(dinosauriosTRex);
            console.log(`   1 T-Rex = ${puntosTRex} puntos (esperado: 12)`);
        }

        // Inicializar la pÃ¡gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ¦• Sistema de pruebas de restricciones cargado correctamente');
            console.log('ğŸ’¡ Haz clic en "Ejecutar Todas las Pruebas" para comenzar');
        });
    </script>
</body>
</html>